{% extends "layout2.html" %}

{% block body_content %}

<section>
    <!-- Search bar -->
    <input type="text" id="searchInput" class="form-control mb-3" placeholder="Search by Firstname, Lastname, or Email">

    <!-- No results message -->
    <div id="noResults" class="text-danger" style="display: none;">No results found.</div>

    <!-- People list -->
    <div id="peopleList">
        <div class="row strong">
            <div class="col-sm">Firstname</div>
            <div class="col-sm">Lastname</div>
            <div class="col-sm">Email</div>  <!-- Added a column for email -->
        </div>
        <hr>
        {% for person in people %}
        <div class="row person-entry">
            <div class="col-sm">
                <p>{{ person.Firstname }}</p>
            </div>
            <div class="col-sm">
                <p>{{ person.Lastname }}</p>
            </div>
            <div class="col-sm">
                <p>{{ person.Email }}</p>  <!-- Display the email -->
            </div>
            <hr>
        </div>
        {% endfor %}
    </div>

    <a href="/register">Add new person</a>
</section>

<!-- JavaScript to filter the people list -->
<script>
    document.getElementById('searchInput').addEventListener('keyup', function () {
        const query = this.value.toLowerCase();
        const people = document.querySelectorAll('#peopleList .person-entry');
        let anyVisible = false;

    people.forEach(function (entry) {
        const text = entry.textContent.toLowerCase();
        const isMatch = text.includes(query);
        entry.style.display = isMatch ? '' : 'none';
        if (isMatch) anyVisible = true;
    });

    // Show or hide the "no results" message
    document.getElementById('noResults').style.display = anyVisible ? 'none' : '';
});
</script>

{% endblock %}

<!--<section>-->
<!--    <div class="row strong">-->
<!--        <div class="col-sm">Firstname</div>-->
<!--        <div class="col-sm">Lastname</div>-->
<!--        <div class="col-sm">Email</div>  &lt;!&ndash; Added a column for email &ndash;&gt;-->
<!--    </div>-->
<!--    <hr>-->
<!--    {% for person in people %}-->
<!--    <div class="row">-->
<!--        <div class="col-sm">-->
<!--            <p>{{ person.Firstname }}</p>-->
<!--        </div>-->
<!--        <div class="col-sm">-->
<!--            <p>{{ person.Lastname }}</p>-->
<!--        </div>-->
<!--        <div class="col-sm">-->
<!--            <p>{{ person.Email }}</p>  &lt;!&ndash; Display the email &ndash;&gt;-->
<!--        </div>-->
<!--        <hr>-->
<!--    </div>-->
<!--    {% endfor %}-->
<!--    <a href="/register">Add new person</a>-->
<!--</section>-->

<!--{% endblock %}-->
